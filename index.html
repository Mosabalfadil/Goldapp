<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy"
content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap:;">

<title>ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช</title>

<link rel="stylesheet" href="style.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

</head>

<body class="bg">

<script>
if (localStorage.getItem("LOGIN") !== "1") {
  location.replace("login.html");
}
</script>

<div class="app">

  <div class="top-actions">
    <button onclick="openChangePass()">๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</button>
    <button onclick="logout()" class="danger">๐ช ุฎุฑูุฌ</button>
  </div>

  <h2 class="title">ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช</h2>
  <h3 id="currentGroupTitle" class="title"></h3>

  <!-- DASHBOARD -->
  <div class="dashboard">
    <div class="card"><span>ุฅุฌูุงูู ูู</span><strong id="sumGive">0.00</strong></div>
    <div class="card"><span>ุฅุฌูุงูู ุนููู</span><strong id="sumTake">0.00</strong></div>
    <div class="card"><span>ุงูุตุงูู</span><strong id="sumBalance">0.00</strong></div>
    <div class="card"><span>ุนุฏุฏ ุงูุฃุดุฎุงุต</span><strong id="countPersons">0</strong></div>
    <div class="card"><span>ุฅุฌูุงูู ุงูููุฒ</span><strong id="sumShops">0.00</strong></div>
  </div>

  <div class="group-bar">
    <input id="groupNameInput" placeholder="ุงุณู ุงููุฌููุนุฉ">
    <button onclick="createGroup()">โ ุฅูุดุงุก ูุฌููุนุฉ</button>

    <select id="groupSelect" onchange="selectGroup()"></select>
    <button onclick="deleteGroup()" class="danger">๐ ุญุฐู ุงููุฌููุนุฉ</button>

    <input id="searchInput" placeholder="ุจุญุซ ุจุงูุงุณู" oninput="searchInGroup()">

    <button onclick="backup()">โฌ๏ธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
    <button onclick="exportPDF()">๐ ุชุตุฏูุฑ PDF</button>
  </div>

  <div class="buttons">
    <button onclick="addPerson()">โ ุฅุถุงูุฉ ุดุฎุต</button>
    <button onclick="addShop()">โ ุฅุถุงูุฉ ููุฒ</button>
  </div>

  <h3 class="title">ุงูุฃุดุฎุงุต</h3>
  <table id="personsTable"></table>

  <h3 class="title">ุงูููุฒ / ุงููุดุชุฑูุงุช</h3>
  <table id="shopsTable"></table>
</div>

<!-- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ -->
<div id="changePassBox" class="modal">
  <div class="modal-content">
    <h3>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
    <input id="oldPass" type="password" placeholder="ูููุฉ ุงููุฑูุฑ ุงููุฏููุฉ">
    <input id="newPass" type="password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">

    <div class="modal-buttons">
      <button onclick="changePassword()">ุญูุธ</button>
      <button onclick="closeChangePass()" class="danger">ุฅูุบุงุก</button>
    </div>

    <p id="passMsg"></p>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
